webpackJsonp([9],{"9ow9":function(e,t){},YEa3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),l=a.n(s),r={name:"rating",data:function(){return{evaluations_list:"",taskid:"",formLabelWidth:"300px",evaluation_list:[],scsz:"1",testloading:!1,checkDis:!1,errText:"",operators:[],selected_parameters:{},form:{chosen_evaluation:[],label_data_path:"",selected_operators:"",selected_parameters:{}},rules:{step1:{chosen_evaluation:[{required:!0,message:"请选择评价指标",trigger:"blur"}]},step3:{selected_operators:[]}},label_path:""}},watch:{scsz:{deep:!0,handler:function(e,t){2==e?this.getGeneratOperatorList():1==e&&this.getCustomizeLabel()}}},methods:{handleSelect:function(e,t){},goBack:function(){this.$router.go(-1)},scsj:function(){var e=this,t={task_id:this.taskid,selected_operators:this.form.selected_operators,selected_parameters:l()(this.selected_parameters)};this.$http.post(this.URL.baseurl+"/get_generat_label_data",t,{emulateJSON:!0}).then(function(t){200==t.body.status?(console.log("200"),e.label_path=t.body.data.label_path):e.label_path="err"},function(e){})},testPath:function(e,t,a){var s=this;return e?1!=this.scsz?(a(),!1):(this.testloading=!0,this.checkDis=!0,this.errText="检查中...",void this.$http.post(this.URL.baseurl+"/check_label_dataset",{label_data_path:this.form.label_data_path},{emulateJSON:!0}).then(function(e){200==e.body.status?(console.log("200"),s.errText=e.body.data,a()):(s.errText="",a(new Error(e.body.data))),s.checkDis=!1,s.testloading=!1},function(e){a(new Error("网络错误")),this.checkDis=!1,this.testloading=!1,this.errText=""})):(this.$refs.step2.validateField("label_data_path"),!1)},testBefor:function(){var e=this,t=!1;this.$refs.step1.validate(function(e){t=!!e}),t&&1==this.scsz?this.$refs.step2.validate(function(t){t&&e.evaluationExecute()}):t&&2==this.scsz&&this.$refs.step3.validate(function(t){t&&e.evaluationExecute()})},evaluationExecute:function(){var e=this;this.evaluations_list="";var t={task_id:this.taskid,label_path:1==this.scsz?this.form.label_data_path:this.form.selected_operators,chosen_evaluation:l()(this.form.chosen_evaluation)};this.$http.post(this.URL.baseurl+"/execute_evaluation",t,{emulateJSON:!0}).then(function(t){e.evaluations_list=t.body.evaluations},function(e){this.$message({message:data.body.data,type:"error"})})},getGeneratOperatorList:function(){var e=this;this.$http.post(this.URL.baseurl+"/get_builtin_label",{task_id:this.taskid},{emulateJSON:!0}).then(function(t){e.operators=t.body.operators,e.form.selected_operators=t.body.selected_operators})},getCustomizeLabel:function(){var e=this;this.$http.post(this.URL.baseurl+"/get_customize_label",{task_id:this.taskid},{emulateJSON:!0}).then(function(t){e.form.label_data_path=t.body.label_data_path})},getAlgorithmParameters:function(){}},created:function(){},activated:function(){var e=this;this.evaluations_list="",this.scsz="",this.taskid=this.$route.query.id,this.$http.post(this.URL.baseurl+"/get_label_checkbox",{task_id:this.taskid},{emulateJSON:!0}).then(function(t){console.log("True"==t.body.is_inline),"True"==t.body.is_inline?e.scsz="2":e.scsz="1"}),this.$http.post(this.URL.baseurl+"/get_evaluation_metrics",{task_id:this.taskid},{emulateJSON:!0}).then(function(t){e.evaluation_list=t.body.evaluation_list,e.form.chosen_evaluation=t.body.chosen_evaluation})},deactivated:function(){this.form={chosen_evaluation:[],label_data_path:"",selected_operators:"",selected_parameters:{}},this.evaluations_list="",this.scsz="",this.$refs.step1.clearValidate(),this.$refs.step2.clearValidate(),this.$refs.step3.clearValidate()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rating-main"},[a("el-row",{staticClass:"title",attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("h3",[e._v("任务ID:"+e._s(e.taskid))])]),e._v(" "),a("el-col",{attrs:{span:14}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:e.goBack}},[e._v("返回")])],1)])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.evaluations_list,expression:"evaluations_list"}]},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("评价结果")])]),e._v(" "),e._l(e.evaluations_list,function(t,s){return a("div",{key:s,staticClass:"text item"},[e._v(e._s(s+" : "+(t||"--")))])})],2)],1),e._v(" "),a("div",[a("el-divider",{attrs:{"content-position":"center"}},[e._v("评价指标")]),e._v(" "),a("el-form",{ref:"step1",attrs:{model:e.form,rules:e.rules.step1}},[a("el-form-item",{attrs:{label:"选择评价指标:","label-width":e.formLabelWidth,prop:"chosen_evaluation"}},[a("el-checkbox-group",{model:{value:e.form.chosen_evaluation,callback:function(t){e.$set(e.form,"chosen_evaluation",t)},expression:"form.chosen_evaluation"}},e._l(e.evaluation_list,function(e){return a("el-checkbox",{key:e,attrs:{label:e}})}),1)],1)],1)],1),e._v(" "),a("div",[a("el-divider",{attrs:{"content-position":"center"}},[e._v("真实因果图（True Causal Graph）")]),e._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"您可以：","label-width":e.formLabelWidth,rules:[{required:!0,message:"请选择数据类型",trigger:"blur"}]}},[a("el-radio",{attrs:{label:"1"},model:{value:e.scsz,callback:function(t){e.scsz=t},expression:"scsz"}},[e._v("自定义真实因果图（True Causal Graph）")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.scsz,callback:function(t){e.scsz=t},expression:"scsz"}},[e._v("内置真实因果图（True Causal Graph）")])],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.scsz,expression:"scsz==1"}],ref:"step2",attrs:{model:e.form,rules:e.rules.step2}},[a("el-form-item",{attrs:{label:"自定义真实因果图（True Causal Graph）：","label-width":e.formLabelWidth,prop:"label_data_path",rules:[{required:1==e.scsz,message:"请输入内容",trigger:"blur"},{validator:e.testPath,trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.label_data_path,callback:function(t){e.$set(e.form,"label_data_path",t)},expression:"form.label_data_path"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",loading:e.testloading,disabled:e.checkDis},on:{click:function(t){return e.testPath()}},slot:"append"},[e._v("检查")])],1),e._v(" "),a("div",{staticClass:"sub-title",domProps:{textContent:e._s(e.errText)}})],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:2==e.scsz,expression:"scsz==2"}],ref:"step3",attrs:{model:e.form,rules:e.rules.step3}},[a("el-form-item",{attrs:{label:"选择真实因果图（True Causal Graph）：","label-width":e.formLabelWidth,prop:"selected_operators",rules:[{required:2==e.scsz,message:"请选择内置数据集",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"请选择内置数据集"},on:{change:e.getAlgorithmParameters},model:{value:e.form.selected_operators,callback:function(t){e.$set(e.form,"selected_operators",t)},expression:"form.selected_operators"}},e._l(e.operators,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),e._l(e.selected_parameters,function(t,s){return a("el-form-item",{key:s,attrs:{label:s,"label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:t},model:{value:e.form.selected_parameters[s],callback:function(t){e.$set(e.form.selected_parameters,s,t)},expression:"form.selected_parameters[key]"}})],1)}),e._v(" "),a("el-form-item",{staticClass:"cc"},[a("div",[e._v(e._s(e.label_path))])])],2)],1),e._v(" "),a("el-form",[a("el-form-item",{staticClass:"cc"},[a("el-button",{attrs:{type:"primary"},on:{click:e.testBefor}},[e._v("评价")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("9ow9")},"data-v-28571dcc",null);t.default=o.exports}});