webpackJsonp([5],{GFSA:function(t,e){},PKpb:function(t,e){},byV4:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),r=s.n(a),i={name:"newProgramme",components:{},props:["currentStep","curTaskid","taskName","taskType"],data:function(){return{taskid:"",paramList:"",testloading:!1,errText:"",checkDis:!1,dialogag:!1,dialogag2:!1,form:{taskName:this.taskName,datasetType:"1",name:"",datasetName:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",datasetpath:"",sf:"",sfcs:{},selected_graph:"",graphcs:{}},rules:{ag:{},step1:{taskName:[{required:!0,message:"请输入名称",trigger:"blur"}]},step2:{datasetType:[{required:!0,message:"请选择",trigger:"blur"}]},step3:{},sfcs:{},graphcs:{}},formLabelWidth:"180px",datasetList:[],sfList:[],selected_graphList:[],sfcs:"",graphcs:""}},methods:{childHandler:function(t){var e=this;console.log(this.$parent),console.log(t),0==t?this.$refs.step1.validate(function(t){t&&e.setTaskName()}):1==t?this.$refs.step2.validate(function(t){t&&e.$emit("updateStep",2)}):2==t&&this.$refs.step3.validate(function(t){t&&e.$emit("updateStep",3)})},handleSelect:function(t,e){console.log(this.$route)},setsfcs:function(){var t=this;this.$refs.sfcs.validate(function(e){e?(t.dialogag=!1,console.log("dskfjlsdkjflk")):console.log("216545454")})},setgraphcs:function(){var t=this;this.$refs.graphcs.validate(function(e){e&&(t.dialogag2=!1)})},setTaskName:function(){var t=this,e={task_name:this.form.taskName,task_type:this.taskType};(this.taskid||this.curTaskid)&&(e.task_id=this.taskid),this.$http.post(this.URL.baseurl+"/add_task",e,{emulateJSON:!0}).then(function(e){e.body.task_id?(t.taskid=e.body.task_id,t.$message({message:"任务名已被保存。",type:"success"}),t.$emit("updateStep",1),console.log("200")):t.$message({message:e.body.data,type:"error"})},function(t){this.$message({message:"网络错误",type:"error"})})},setDatasetInfo:function(){var t=this,e={task_id:this.taskid,name_path:2==this.form.datasetType?this.form.datasetName:this.form.datasetpath};this.$http.post(this.URL.baseurl+"/set_dataset_info",e,{emulateJSON:!0}).then(function(e){200==e.body.status?(t.setAlgorithmInfo(),console.log("200")):t.$message({message:e.body.data||"未知错误",type:"error"})},function(t){this.$message({message:"网络错误",type:"error"})})},setAlgorithmInfo:function(){for(var t=this,e=this.form.sfcs,s={},a=0;a<e.length;a++)s[e[a].name]=e[a].val;var i={task_id:this.taskid,selected_algorithm:this.form.sf,selected_parameters:r()(s)};1==this.taskType&&(i.selected_graph=this.form.selected_graph),this.$http.post(this.URL.baseurl+"/set_algorithm_info",i,{emulateJSON:!0}).then(function(e){200==e.body.status?(t.runTask(),console.log("200")):t.$message({message:e.body.data,type:"error"})},function(t){this.$message({message:"网络错误",type:"error"})})},taskExecute:function(){this.setDatasetInfo()},runTask:function(){var t=this,e={task_id:this.taskid};this.$http.post(this.URL.baseurl+"/run_task",e,{emulateJSON:!0}).then(function(e){200==e.body.status_code?t.$emit("updateStep",4):t.$message({message:e.body.data||"error",type:"error"})},function(t){this.$message({message:"网络错误",type:"error"})})},getDatasetList:function(){var t=this;this.$http.post(this.URL.baseurl+"/get_inline_dataset_names",{task_id:this.taskid},{emulateJSON:!0}).then(function(e){t.datasetList=e.body.inline_datasets,t.form.datasetName=e.body.selected_dataset})},getAlgorithmName:function(){var t=this;this.$http.post(this.URL.baseurl+"/get_algorithm_names",{task_id:this.taskid},{emulateJSON:!0}).then(function(e){for(var s=e.body,a=0;a<s.length;a++)"选择算法"==s[a].name?(t.sfList=s[a].list,t.form.sf=s[a].val||s[a].default):"样本分布"==s[a].name?(t.sfList=s[a].list,t.form.sf=s[a].val||s[a].default):"因果图类型"==s[a].name&&(t.selected_graphList=s[a].list,t.form.selected_graph=s[a].val||s[a].default);t.getAlgorithmParameters()})},getAlgorithmParameters:function(){var t=this;if(1==this.taskType)return this.getSelectedGraphParameters(),!1;var e={task_id:this.taskid,selected_algorithm:this.form.sf};this.$http.post(this.URL.baseurl+"/get_algorithm_parameters",e,{emulateJSON:!0}).then(function(e){for(var s=e.body,a=[],r=[],i=0;i<s.length;i++)a.push({name:s[i].name,default:s[i].default,list:s[i].list}),r.push({name:s[i].name,val:s[i].val||s[i].default});t.sfcs=a,t.form.sfcs=r,t.$refs.step3.clearValidate()},function(t){this.sfcs={},this.form.sfcs={},this.$refs.step3.clearValidate(),this.$message({message:"网络错误",type:"error"})})},getSelectedGraphParameters:function(){var t=this,e={task_id:this.taskid,selected_algorithm:this.form.sf,selected_graph:-1==this.form.sf.indexOf("IID")?"":this.form.selected_graph};this.$http.post(this.URL.baseurl+"/get_algorithm_parameters",e,{emulateJSON:!0}).then(function(e){for(var s=e.body,a=[],r=[],i=0;i<s.length;i++)a.push({name:s[i].name,default:s[i].default,list:s[i].list}),r.push({name:s[i].name,val:s[i].val||s[i].default});t.sfcs=a,t.form.sfcs=r,t.$refs.step3.clearValidate()},function(t){this.sfcs={},this.form.sfcs={},this.$refs.step3.clearValidate(),this.$message({message:"网络错误",type:"error"})})},testPath:function(t,e,s){var a=this;if(!t)return this.$refs.step2.validateField("datasetpath"),!1;if(1!=this.form.datasetType)return s(),!1;var r={path:this.form.datasetpath};console.log(this.form.datasetpath),this.testloading=!0,this.checkDis=!0,this.errText="检查中...",this.$http.post(this.URL.baseurl+"/check_dataset",r,{emulateJSON:!0}).then(function(t){200==t.body.status?(console.log("200"),a.errText=t.body.data,s()):(a.errText="",s(new Error(t.body.data))),a.testloading=!1,a.checkDis=!1},function(t){s(new Error("网络错误")),this.checkDis=!1,this.testloading=!1,this.errText="网络错误"})},getDatasetPath:function(){var t=this,e={task_id:this.taskid};this.$http.post(this.URL.baseurl+"/get_edit_customize_dataset_path",e,{emulateJSON:!0}).then(function(e){t.form.datasetpath=e.body.customize_path},function(t){this.$message({message:data.body.data,type:"error"})})},getInlineBox:function(){var t=this,e={task_id:this.taskid};this.$http.post(this.URL.baseurl+"/get_builtin_data_checkbox",e,{emulateJSON:!0}).then(function(e){console.log(e.body.is_inline),e.body.is_inline?t.form.datasetType="2":(t.getDatasetPath(),t.form.datasetType="1")},function(t){this.$message({message:data.body.data,type:"error"})})}},created:function(){this.curTaskid&&0==this.currentStep&&(this.taskid=this.curTaskid,this.form.taskName=this.taskName,this.getInlineBox())},watch:{"form.datasetType":{deep:!0,handler:function(t,e){2==t?this.getDatasetList():this.curTaskid&&this.getDatasetPath()}},currentStep:{handler:function(t,e){1==t&&t<e&&this.getInlineBox(),2==t&&this.getAlgorithmName()}},taskName:{handler:function(t,e){this.form.taskName=t}},curTaskid:{handler:function(t,e){t?0==this.currentStep&&(this.taskid=t,this.getInlineBox()):this.taskid=""}}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-steps",{attrs:{active:t.currentStep,"align-center":""}},[s("el-step",{attrs:{title:"步骤1",description:1==t.taskType?"设置模拟数据名":"设置任务名"}}),t._v(" "),s("el-step",{attrs:{title:"步骤2",description:1==t.taskType?"设置存放目录":"选择数据"}}),t._v(" "),s("el-step",{attrs:{title:"步骤3",description:1==t.taskType?"样本分布选择":"设置参数"}}),t._v(" "),s("el-step",{attrs:{title:"步骤4",description:"检查配置"}})],1),t._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:0==t.currentStep,expression:"currentStep==0"}],ref:"step1",staticClass:"step",attrs:{model:t.form,rules:t.rules.step1}},[s("el-form-item",{attrs:{label:1==t.taskType?"模拟数据名：":"任务名：","label-width":t.formLabelWidth,prop:"taskName"}},[s("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1)],1),t._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:1==t.currentStep,expression:"currentStep==1"}],ref:"step2",staticClass:"step",attrs:{model:t.form,rules:t.rules.step2}},[2==t.taskType?s("el-form-item",{attrs:{label:"数据集：","label-width":t.formLabelWidth,prop:"datasetType"}},[s("el-radio",{attrs:{label:"1"},model:{value:t.form.datasetType,callback:function(e){t.$set(t.form,"datasetType",e)},expression:"form.datasetType"}},[t._v("自定义训练数据集")]),t._v(" "),s("el-radio",{attrs:{label:"2"},model:{value:t.form.datasetType,callback:function(e){t.$set(t.form,"datasetType",e)},expression:"form.datasetType"}},[t._v("内置训练数据集")])],1):t._e(),t._v(" "),1==t.taskType?s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.form.datasetType,expression:"form.datasetType==1"}],attrs:{label:"存放目录：","label-width":t.formLabelWidth,prop:"datasetpath",rules:[{required:!0,message:"请填写存放目录",trigger:"blur"}]}},[s("el-input",{attrs:{placeholder:"请填写存放目录"},model:{value:t.form.datasetpath,callback:function(e){t.$set(t.form,"datasetpath",e)},expression:"form.datasetpath"}}),t._v(" "),s("div",{staticClass:"sub-title",domProps:{textContent:t._s(t.errText)}})],1):t._e(),t._v(" "),2==t.taskType?s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.form.datasetType,expression:"form.datasetType==1"}],attrs:{label:"自定义训练数据集：","label-width":t.formLabelWidth,prop:"datasetpath",rules:[{required:1==t.form.datasetType,message:"请填写自定义训练数据集",trigger:"blur"},{validator:t.testPath,trigger:"blur"}]}},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.datasetpath,callback:function(e){t.$set(t.form,"datasetpath",e)},expression:"form.datasetpath"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search",loading:t.testloading,disabled:t.checkDis},on:{click:function(e){return t.testPath()}},slot:"append"},[t._v("检查")])],1),t._v(" "),s("div",{staticClass:"sub-title",domProps:{textContent:t._s(t.errText)}})],1):t._e(),t._v(" "),2==t.taskType?s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.form.datasetType,expression:"form.datasetType==2"}],attrs:{label:"内置训练数据集","label-width":t.formLabelWidth,prop:"datasetName",rules:{required:2==t.form.datasetType,message:"请内置训练数据集",trigger:"blur"}}},[s("el-select",{attrs:{placeholder:"请选择内置数据"},model:{value:t.form.datasetName,callback:function(e){t.$set(t.form,"datasetName",e)},expression:"form.datasetName"}},t._l(t.datasetList,function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1):t._e()],1),t._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:2==t.currentStep,expression:"currentStep==2"}],ref:"step3",staticClass:"step",attrs:{model:t.form,rules:t.rules.step3}},[s("el-form-item",{attrs:{label:1==t.taskType?"样本分布：":"选择算法：","label-width":t.formLabelWidth,prop:"sf",rules:{required:!0,message:"请选择",trigger:"blur"}}},[s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{prop:"sf"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getAlgorithmParameters},model:{value:t.form.sf,callback:function(e){t.$set(t.form,"sf",e)},expression:"form.sf"}},t._l(t.sfList,function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[2==t.taskType&&t.sfcs.length>0?s("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.dialogag=!0}}},[t._v("配置参数")]):t._e()],1)],1),t._v(" "),1==t.taskType&&-1!=t.form.sf.indexOf("IID")?s("el-form-item",{attrs:{label:"因果图类型：","label-width":t.formLabelWidth,prop:"selected_graph",rules:{required:!0,message:"请选择",trigger:"blur"}}},[s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{prop:"selected_graph"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getSelectedGraphParameters},model:{value:t.form.selected_graph,callback:function(e){t.$set(t.form,"selected_graph",e)},expression:"form.selected_graph"}},t._l(t.selected_graphList,function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1)],1):t._e(),t._v(" "),1==t.taskType?s("el-form-item",{attrs:{label:"","label-width":t.formLabelWidth,prop:"selected_graph"}},[s("el-col",{attrs:{span:8}},[t.sfcs.length>0?s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogag=!0}}},[t._v("配置参数")]):t._e()],1)],1):t._e()],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.currentStep,expression:"currentStep==3"}],staticClass:"step"},[s("div",[s("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(1==t.taskType?"模拟数据名":"任务名"))]),t._v(" "),s("P",[t._v(t._s(t.form.taskName||"--"))])],1),t._v(" "),s("div",[s("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(1==t.taskType?"存放目录":"数据集"))]),t._v(" "),s("P",{directives:[{name:"show",rawName:"v-show",value:1==t.form.datasetType,expression:"form.datasetType==1"}]},[t._v(t._s(t.form.datasetpath||"--"))]),t._v(" "),s("P",{directives:[{name:"show",rawName:"v-show",value:2==t.form.datasetType,expression:"form.datasetType==2"}]},[t._v(t._s(t.form.datasetName||"--"))])],1),t._v(" "),s("div",[s("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(1==t.taskType?"样本分布":"算法"))]),t._v(" "),s("P",[t._v(t._s(t.form.sf||"--"))])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.taskType&&-1!=t.form.sf.indexOf("IID"),expression:"taskType==1&&form.sf.indexOf('IID')!=-1"}]},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("因果图类型")]),t._v(" "),s("P",[t._v(t._s(t.form.selected_graph||"--"))])],1),t._v(" "),s("div",[s("el-divider",{attrs:{"content-position":"left"}},[t._v("参数")]),t._v(" "),s("div",t._l(t.form.sfcs,function(e,a){return s("el-tag",{key:a,staticStyle:{margin:"0 10px 10px 0"},attrs:{effect:a%2?"plain":"light"}},[t._v(t._s(e.name+" : "+(e.val||"--")))])}),1),t._v(" "),s("el-card",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("参数")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:1==t.taskType,expression:"taskType==1"}]},[t._v(t._s("因果图类型："+(t.form.selected_graph||"--")))])]),t._v(" "),t._l(t.form.sfcs,function(e,a){return s("el-tag",{key:a,staticStyle:{margin:"0 10px 10px"},attrs:{effect:a%2?"plain":"light"}},[t._v(t._s(e.name+" : "+(e.val||"--")))])})],2)],1)]),t._v(" "),s("el-dialog",{attrs:{title:"配置参数",width:"82%",visible:t.dialogag,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":""},on:{"update:visible":function(e){t.dialogag=e}}},[s("div",[s("el-form",{ref:"sfcs",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form,rules:t.rules.sfcs,"label-width":"250px"}},t._l(t.sfcs,function(e,a){return s("el-form-item",{key:a,attrs:{label:e.name,prop:"sfcs["+a+"]",rules:{required:!(null==e.default),message:"请填写参数",trigger:"blur"}}},[0==e.list.length?s("el-input",{attrs:{placeholder:null==e.default?"":"请填写参数"},model:{value:t.form.sfcs[a].val,callback:function(e){t.$set(t.form.sfcs[a],"val",e)},expression:"form.sfcs[key].val"}}):t._e(),t._v(" "),e.list.length>0?s("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:null==e.default?"":"请选择参数"},model:{value:t.form.sfcs[a].val,callback:function(e){t.$set(t.form.sfcs[a],"val",e)},expression:"form.sfcs[key].val"}},t._l(e.list,function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})}),1):t._e()],1)}),1),t._v(" "),s("el-form",{ref:"ag",staticClass:"step",attrs:{model:t.form,rules:t.rules.ag}})],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.setsfcs}},[t._v("完成")]),t._v(" "),s("el-button",{on:{click:function(e){t.dialogag=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var l={name:"PCastle",components:{newProgramme:s("VU/8")(i,o,!1,function(t){s("GFSA")},"data-v-265ff8da",null).exports},data:function(){return{a:"",search:"",curTaskid:"",taskName:"",taskType:"",isNew:"",multipleSelection:[],isTimer:!0,currentStep:0,form:{type:"1"},rules:{setType:{type:[{required:!0,message:"请选择",trigger:"blur"}]}},form01:{data_name:"",data_description:"",data_path:"",generating_operator:"",generating_parameters:{}},rules01:{data_name:[{required:!0,message:"请输入模拟数据名",trigger:"blur"},{pattern:/^[^:*?"<>|\/\\]+$/,message:'模拟数据名不能包含字符：\\/:*?"<>|',trigger:"blur"}],data_description:[{required:!0,message:"请输入描述",trigger:"blur"}],generating_operator:[{required:!0,message:"请选择生成算子",trigger:"blur"}]},tableData:[],dialogFormVisible:!1,dialogSetTypeVisible:!1}},methods:{format:function(t,e){return 100*t>0?function(){return 100*t+"%"}:null==t?function(){return"0%"}:function(){return"Failed"}},percentage:function(t){return 100*t>0?100*t:null==t?0:100},setType:function(){this.dialogSetTypeVisible=!0},openSetdialog:function(){var t=this;this.$refs.setType.validate(function(e){e&&(t.dialogSetTypeVisible=!1,t.newTask())})},newTask:function(){this.dialogFormVisible=!0,this.isNew=!0,this.taskType=this.form.type,this.curTaskid="",this.taskName="",this.currentStep=0},editTask:function(t,e,s){this.dialogFormVisible=!0,this.isNew=!1,this.taskType=e.task_type,this.curTaskid=e.task_id,this.taskName=e.task_name,this.currentStep=0},nextStep:function(){this.$refs.stepBlock.childHandler(this.currentStep)},updateStep:function(t){4==t&&(this.dialogFormVisible=!1,this.getTaskList(!0)),this.currentStep=t},executeStep:function(){this.$refs.stepBlock.taskExecute()},toggleSelection:function(){this.$refs.multipleTable.clearSelection()},deleteTask:function(t){var e=this;if(!this.multipleSelection.length)return!1;this.$http.post(this.URL.baseurl+"/delete_tasks",{task_id:r()(this.multipleSelection)},{emulateJSON:!0}).then(function(t){200==t.body.status?(e.getTaskList(!0),e.$message({message:t.body.data,type:"success"}),e.toggleSelection()):e.$message({message:t.body.data,type:"error"})},function(t){this.$message({message:"失败",type:"error"})})},getTaskList:function(t){var e=this;this.$http.get(this.URL.baseurl+"/get_task_list").then(function(s){e.tableData=s.body,t||e.isTimer&&setTimeout(e.getTaskList,12e4)},function(t){this.$message({message:"网络错误任务列表获取失败,请刷新页面重试",type:"error"})})},showDetail:function(t,e,s){1==e.task_type?this.$router.push({path:"/detail",query:{id:e.task_id,name:e.task_name}}):this.$router.push({path:"/detail2",query:{id:e.task_id}})},showRating:function(t,e){console.log(e.task_id),this.$router.push({path:"/rating",query:{id:e.task_id}})},handleSelectionChange:function(t){this.multipleSelection=[];for(var e=0;e<t.length;e++)this.multipleSelection.push(t[e].task_id)},downloader:function(t,e){var s=document.createElement("form");s.action=this.URL.baseurl+"/download_file",s.method="post",s.target="_black",s.style.display="none";var a=document.createElement("textarea");a.name="task_id",a.value=e.task_id,s.appendChild(a),document.body.appendChild(s),s.submit(),s.parentNode.removeChild(s)}},watch:{dialogFormVisible:{handler:function(t,e){t||(this.curTaskid="",this.taskName="",this.currentStep=-1)}}},created:function(){this.isTimer=!0,this.getTaskList()},activated:function(){this.isTimer||(this.isTimer=!0,this.getTaskList())},deactivated:function(){this.isTimer=!1}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("el-input",{attrs:{placeholder:"输入任务名关键字筛选",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),s("el-col",{attrs:{span:3}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.a,callback:function(e){t.a=e},expression:"a"}},t._l([{label:"全部",value:""},{label:"数据生成",value:"1"},{label:"因果发现",value:"2"}],function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-col",{attrs:{span:7}},[s("el-button",{attrs:{icon:"el-icon-plus",type:"primary",plain:""},on:{click:t.setType}},[t._v("新增任务")]),t._v(" "),s("el-popconfirm",{attrs:{confirmButtonText:t.multipleSelection.length?"是的":"确定",cancelButtonText:t.multipleSelection.length?"不用了":"",icon:"el-icon-info",iconColor:"red",title:t.multipleSelection.length?"确定删除选中的"+t.multipleSelection.length+"项任务？":"你还没有选中任何任务",confirmButtonType:"danger"},on:{onConfirm:t.deleteTask}},[s("el-button",{attrs:{slot:"reference",icon:"el-icon-delete",type:"danger",plain:""},slot:"reference"},[t._v("删除任务")])],1)],1)],1),t._v(" "),s("el-row",[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"max-height":"750px",data:t.tableData.filter(function(e){return(!t.search||e.task_name.toLowerCase().includes(t.search.toLowerCase()))&&(!t.a||e.task_type==t.a)}),"tooltip-effect":"light",border:"",stripe:"","row-key":"task_id"},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"40","reserve-selection":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"task_id",label:"序号",sortable:"",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"task_name",label:"任务名","min-width":"120",sortable:"","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"ov-el"},[t._v(t._s(e.row.task_name))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"task_type",label:"任务类型",sortable:"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1==e.row.task_type?"数据生成":"因果发现"))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"file_name",label:"数据集","min-width":"120",sortable:"","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"ov-el"},[t._v(t._s(e.row.file_name))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"",width:"160"}}),t._v(" "),s("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:"",width:"160"}}),t._v(" "),s("el-table-column",{attrs:{prop:"consumed_time",label:"耗时",sortable:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.consumed_time?e.row.consumed_time+"秒":"--"))]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"task_status",label:"任务状态",sortable:"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.row.task_status>0?100*e.row.task_status+"%":e.row.task_status,placement:"top-start"}},[s("el-progress",{class:100*e.row.task_status<20?"black-text":"",attrs:{"text-inside":!0,"stroke-width":26,color:parseInt(e.row.task_status)?"#67C23A":"",status:e.row.task_status>0&&e.row.task_status<100?null:"exception",percentage:t.percentage(e.row.task_status),format:t.format(e.row.task_status)}})],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"performance",label:"性能指标",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},t._l(e.row.performance,function(e,a){return s("div",{key:a,staticClass:"text item"},[t._v(t._s(a)+"："+t._s(e))])}),0)]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"func",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button-group",[s("el-button",{attrs:{size:"mini",plain:""},on:{click:function(s){return t.editTask(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),s("el-button",{attrs:{size:"mini",plain:"",disabled:!parseInt(e.row.task_status)},on:{click:function(s){return t.showDetail(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),s("el-button",{attrs:{size:"mini",plain:"",disabled:!parseInt(e.row.task_status)||1==e.row.task_type},on:{click:function(s){return t.showRating(e.$index,e.row)}}},[t._v("评价")]),t._v(" "),s("el-button",{attrs:{size:"mini",plain:"",disabled:!parseInt(e.row.task_status)},on:{click:function(s){return t.downloader(e.$index,e.row)}}},[t._v("下载")])],1)]}}])})],1)],1),t._v(" "),s("el-dialog",{attrs:{title:(t.isNew?"新增任务":"编辑任务: "+t.curTaskid)+" -- "+((t.isNew?1==t.form.type:1==this.taskType)?"数据生成":"因果发现"),width:"1000px",visible:t.dialogFormVisible,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("newProgramme",{ref:"stepBlock",attrs:{currentStep:t.currentStep,curTaskid:t.curTaskid,taskName:t.taskName,taskType:t.taskType},on:{updateStep:t.updateStep}}),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.currentStep>0?s("el-button",{on:{click:function(e){t.currentStep-=1}}},[t._v("上一步")]):t._e(),t._v(" "),s("el-tooltip",{ref:"test",attrs:{content:"Bottom center",placement:"bottom",effect:"light"}}),t._v(" "),t.currentStep<3?s("el-button",{attrs:{type:"primary",title:t.currentStep?"":"点击下一步将保存该步骤"},on:{click:t.nextStep}},[t._v("下一步")]):t._e(),t._v(" "),3==t.currentStep?s("el-button",{attrs:{type:"primary"},on:{click:t.executeStep}},[t._v("确 定")]):t._e(),t._v(" "),s("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"设置任务类型",visible:t.dialogSetTypeVisible,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":""},on:{"update:visible":function(e){t.dialogSetTypeVisible=e}}},[s("div",[s("el-form",{ref:"setType",staticClass:"step",attrs:{model:t.form,rules:t.rules.setType}},[s("el-form-item",{attrs:{label:"任务类型：","label-width":"260px",prop:"type"}},[s("el-select",{attrs:{placeholder:"请选择任务类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[s("el-option",{attrs:{label:"数据生成",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"因果发现",value:"2"}})],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.openSetdialog}},[t._v("下一步")]),t._v(" "),s("el-button",{on:{click:function(e){t.dialogSetTypeVisible=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var c=s("VU/8")(l,n,!1,function(t){s("ihjA"),s("PKpb")},"data-v-70ff4944",null);e.default=c.exports},ihjA:function(t,e){}});